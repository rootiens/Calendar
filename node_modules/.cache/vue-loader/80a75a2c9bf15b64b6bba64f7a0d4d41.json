{"remainingRequest":"/home/peyman/Desktop/vue3/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/peyman/Desktop/vue3/src/components/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/peyman/Desktop/vue3/src/components/Calendar.vue","mtime":1604566011822},{"path":"/home/peyman/Desktop/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/peyman/Desktop/vue3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/peyman/Desktop/vue3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/peyman/Desktop/vue3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZGJ9IGZyb20gJ0AvbWFpbic7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIHRvZGF5OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSwKICAgIGZvY3VzOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSwKICAgIHR5cGU6ICJtb250aCIsCiAgICB0eXBlVG9MYWJlbDogewogICAgICBtb250aDogIk1vbnRoIiwKICAgICAgd2VlazogIldlZWsiLAogICAgICBkYXk6ICJEYXkiLAogICAgICAiNGRheSI6ICI0IERheXMiCiAgICB9LAogICAgbmFtZTogbnVsbCwKICAgIGRldGFpbHM6IG51bGwsCiAgICBzdGFydDogbnVsbCwKICAgIGVuZDogbnVsbCwKICAgIGNvbG9yOiAiIzE5NzZEMiIsCiAgICBjdXJyZW50bHlFZGl0aW5nOiBudWxsLAogICAgc2VsZWN0ZWRFdmVudDoge30sCiAgICBzZWxlY3RlZEVsZW1lbnQ6IG51bGwsCiAgICBzZWxlY3RlZE9wZW46IGZhbHNlLAogICAgZXZlbnRzOiBbXSwKICAgIGRpYWxvZzogZmFsc2UKICB9KSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRFdmVudHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldEV2ZW50cygpIHsKICAgICAgbGV0IHNuYXBzaG90ID0gYXdhaXQgZGIuY29sbGVjdGlvbignY2FsRXZlbnQnKS5nZXQoKTsKICAgICAgbGV0IGV2ZW50cyA9IFtdOwogICAgICBzbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7CiAgICAgICAgbGV0IGFwcERhdGEgPSBkb2MuZGF0YSgpOwogICAgICAgIGFwcERhdGEuaWQgPSBkb2MuaWQ7CiAgICAgICAgZXZlbnRzLnB1c2goYXBwRGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLmV2ZW50cyA9IGV2ZW50czsKICAgIH0sCiAgICBhc3luYyBhZGRFdmVudCgpIHsKICAgICAgaWYgKHRoaXMubmFtZSAmJiB0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kKSB7CiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbignY2FsRXZlbnQnKS5hZGQoewogICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgZGV0YWlsczogdGhpcy5kZXRhaWxzLAogICAgICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQsCiAgICAgICAgICBlbmQ6IHRoaXMuZW5kLAogICAgICAgICAgY29sb3I6IHRoaXMuY29sb3IKCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5nZXRFdmVudHMoKTsKICAgICAgICB0aGlzLm5hbWUgPSAiIjsKICAgICAgICB0aGlzLmRldGFpbHMgPSAiIjsKICAgICAgICB0aGlzLnN0YXJ0ID0gIiI7CiAgICAgICAgdGhpcy5lbmQgPSAiIjsKICAgICAgICB0aGlzLmNvbG9yID0gIiMxOTc2RDIiOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdOYW1lLCBzdGFydCBhbmQgZW5kIGRhdGUgYXJlIHJlcXVpcmVkJykKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHVwZGF0ZUV2ZW50KGV2ZW50KSB7CiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NhbEV2ZW50JykuZG9jKHRoaXMuY3VycmVudGx5RWRpdGluZykudXBkYXRlKHsKICAgICAgICBkZXRhaWxzOiBldmVudC5kZXRhaWxzCiAgICAgIH0pOwogICAgICB0aGlzLnNlbGVjdGVkT3BlbiA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbnRseUVkaXRpbmcgPSBudWxsOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZUV2ZW50KGV2ZW50KSB7CiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NhbEV2ZW50JykuZG9jKGV2ZW50KS5kZWxldGUoKTsKICAgICAgdGhpcy5zZWxlY3RlZE9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5nZXRFdmVudHMoKTsKICAgIH0sCiAgICB2aWV3RGF5KHtkYXRlfSkgewogICAgICB0aGlzLmZvY3VzID0gZGF0ZQogICAgICB0aGlzLnR5cGUgPSAnZGF5JwogICAgfSwKICAgIGdldEV2ZW50Q29sb3IoZXZlbnQpIHsKICAgICAgcmV0dXJuIGV2ZW50LmNvbG9yCiAgICB9LAogICAgc2V0VG9kYXkoKSB7CiAgICAgIHRoaXMuZm9jdXMgPSAnJwogICAgfSwKICAgIHByZXYoKSB7CiAgICAgIHRoaXMuJHJlZnMuY2FsZW5kYXIucHJldigpCiAgICB9LAogICAgbmV4dCgpIHsKICAgICAgdGhpcy4kcmVmcy5jYWxlbmRhci5uZXh0KCkKICAgIH0sCiAgICBlZGl0RXZlbnQoZXZlbnQpIHsKICAgICAgdGhpcy5jdXJyZW50bHlFZGl0aW5nID0gZXZlbnQuaWQ7CiAgICB9LAogICAgc2hvd0V2ZW50KHtuYXRpdmVFdmVudCwgZXZlbnR9KSB7CiAgICAgIGNvbnN0IG9wZW4gPSAoKSA9PiB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEV2ZW50ID0gZXZlbnQKICAgICAgICB0aGlzLnNlbGVjdGVkRWxlbWVudCA9IG5hdGl2ZUV2ZW50LnRhcmdldAogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5zZWxlY3RlZE9wZW4gPSB0cnVlCiAgICAgICAgfSwgMTApCiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcGVuKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZE9wZW4gPSBmYWxzZQogICAgICAgIHNldFRpbWVvdXQob3BlbiwgMTApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3BlbigpCiAgICAgIH0KICAgICAgbmF0aXZlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgIH0sCiAgICB1cGRhdGVSYW5nZSh7c3RhcnQsIGVuZH0pIHsKICAgICAgY29uc3QgZXZlbnRzID0gW10KICAgICAgY29uc3QgbWluID0gbmV3IERhdGUoYCR7c3RhcnQuZGF0ZX1UMDA6MDA6MDBgKQogICAgICBjb25zdCBtYXggPSBuZXcgRGF0ZShgJHtlbmQuZGF0ZX1UMjM6NTk6NTlgKQogICAgICBjb25zdCBkYXlzID0gKG1heC5nZXRUaW1lKCkgLSBtaW4uZ2V0VGltZSgpKSAvIDg2NDAwMDAwCiAgICAgIGNvbnN0IGV2ZW50Q291bnQgPSB0aGlzLnJuZChkYXlzLCBkYXlzICsgMjApCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnRDb3VudDsgaSsrKSB7CiAgICAgICAgY29uc3QgYWxsRGF5ID0gdGhpcy5ybmQoMCwgMykgPT09IDAKICAgICAgICBjb25zdCBmaXJzdFRpbWVzdGFtcCA9IHRoaXMucm5kKG1pbi5nZXRUaW1lKCksIG1heC5nZXRUaW1lKCkpCiAgICAgICAgY29uc3QgZmlyc3QgPSBuZXcgRGF0ZShmaXJzdFRpbWVzdGFtcCAtIChmaXJzdFRpbWVzdGFtcCAlIDkwMDAwMCkpCiAgICAgICAgY29uc3Qgc2Vjb25kVGltZXN0YW1wID0gdGhpcy5ybmQoMiwgYWxsRGF5ID8gMjg4IDogOCkgKiA5MDAwMDAKICAgICAgICBjb25zdCBzZWNvbmQgPSBuZXcgRGF0ZShmaXJzdC5nZXRUaW1lKCkgKyBzZWNvbmRUaW1lc3RhbXApCiAgICAgICAgZXZlbnRzLnB1c2goewogICAgICAgICAgbmFtZTogdGhpcy5uYW1lc1t0aGlzLnJuZCgwLCB0aGlzLm5hbWVzLmxlbmd0aCAtIDEpXSwKICAgICAgICAgIHN0YXJ0OiBmaXJzdCwKICAgICAgICAgIGVuZDogc2Vjb25kLAogICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JzW3RoaXMucm5kKDAsIHRoaXMuY29sb3JzLmxlbmd0aCAtIDEpXSwKICAgICAgICAgIHRpbWVkOiAhYWxsRGF5LAogICAgICAgIH0pCiAgICAgIH0KICAgICAgdGhpcy5ldmVudHMgPSBldmVudHMKICAgIH0sCiAgICBybmQgKGEsIGIpIHsKICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGIgLSBhICsgMSkgKiBNYXRoLnJhbmRvbSgpKSArIGEKICAgIH0sCgoKICB9LAp9Cg=="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"Calendar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-row class=\"fill-height\">\n    <v-col>\n      <v-sheet height=\"64\">\n        <v-toolbar\n            flat\n        >\n          <v-btn\n              class=\"mr-4\"\n              color=\"primary\"\n              @click=\"dialog = true\"\n              dark\n          >\n            New Event\n          </v-btn>\n          <v-btn\n              outlined\n              class=\"mr-4\"\n              color=\"grey darken-2\"\n              @click=\"setToday\"\n          >\n            Today\n          </v-btn>\n          <v-btn\n              fab\n              text\n              small\n              color=\"grey darken-2\"\n              @click=\"prev\"\n          >\n            <v-icon small>\n              mdi-chevron-left\n            </v-icon>\n          </v-btn>\n          <v-btn\n              fab\n              text\n              small\n              color=\"grey darken-2\"\n              @click=\"next\"\n          >\n            <v-icon small>\n              mdi-chevron-right\n            </v-icon>\n          </v-btn>\n          <v-toolbar-title v-if=\"$refs.calendar\">\n            {{ $refs.calendar.title }}\n          </v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-menu\n              bottom\n              right\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                  outlined\n                  color=\"grey darken-2\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n              >\n                <span>{{ typeToLabel[type] }}</span>\n                <v-icon right>\n                  mdi-menu-down\n                </v-icon>\n              </v-btn>\n            </template>\n            <v-list>\n              <v-list-item @click=\"type = 'day'\">\n                <v-list-item-title>Day</v-list-item-title>\n              </v-list-item>\n              <v-list-item @click=\"type = 'week'\">\n                <v-list-item-title>Week</v-list-item-title>\n              </v-list-item>\n              <v-list-item @click=\"type = 'month'\">\n                <v-list-item-title>Month</v-list-item-title>\n              </v-list-item>\n              <v-list-item @click=\"type = '4day'\">\n                <v-list-item-title>4 days</v-list-item-title>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </v-toolbar>\n      </v-sheet>\n      <!--    add event  -->\n      <v-dialog v-model=\"dialog\" max-width=\"500\">\n        <v-card>\n          <v-container>\n            <v-form @submit.prevent=\"addEvent\">\n              <v-text-field v-model=\"name\" type=\"text\" label=\"Event name (Required)\"></v-text-field>\n              <v-text-field v-model=\"details\" type=\"text\" label=\"Details\"></v-text-field>\n              <v-text-field v-model=\"start\" type=\"date\" label=\"Start (Required)\"></v-text-field>\n              <v-text-field v-model=\"end\" type=\"date\" label=\"End (Required)\"></v-text-field>\n              <v-text-field v-model=\"color\" type=\"color\" label=\"Color ( Click to open color menu)\"></v-text-field>\n              <v-btn type=\"submit\" color=\"primary\" class=\"mr-4\" @click.stop=\"dialog=false\">Create Event</v-btn>\n            </v-form>\n          </v-container>\n        </v-card>\n      </v-dialog>\n      <v-sheet >\n        <v-calendar\n            ref=\"calendar\"\n            v-model=\"focus\"\n            color=\"primary\"\n            :events=\"events\"\n            :event-color=\"getEventColor\"\n            :type=\"type\"\n            @click:event=\"showEvent\"\n            @click:more=\"viewDay\"\n            @click:date=\"viewDay\"\n            @change=\"updateRange\"\n        ></v-calendar>\n        <v-menu\n            v-model=\"selectedOpen\"\n            :close-on-content-click=\"false\"\n            :activator=\"selectedElement\"\n            offset-x\n        >\n          <v-card\n              color=\"grey lighten-4\"\n              min-width=\"350px\"\n              flat\n          >\n            <v-toolbar\n                :color=\"selectedEvent.color\"\n                dark\n            >\n              <v-btn @click=\"deleteEvent(selectedEvent.id)\" icon>\n                <v-icon>mdi-delete</v-icon>\n              </v-btn>\n              <v-toolbar-title v-html=\"selectedEvent.name\"></v-toolbar-title>\n              <v-spacer></v-spacer>\n            </v-toolbar>\n            <v-card-text>\n              <form v-if=\"currentlyEditing !== selectedEvent.id\">\n                {{ selectedEvent.details }}\n\n              </form>\n              <form v-if=\"currentlyEditing === selectedEvent.id\">\n                <textarea-autosize\n                    v-model=\"selectedEvent.details\"\n                    type=\"text\"\n                    style=\"width: 100%\"\n                    :min-height=\"100\"\n                    placehokder=\"add note\"\n                ></textarea-autosize>\n              </form>\n\n            </v-card-text>\n            <v-card-actions>\n              <v-btn\n                  text\n                  color=\"secondary\"\n                  @click=\"selectedOpen = false\"\n              >\n                Close\n              </v-btn>\n              <v-btn\n                  text\n                  v-if=\"currentlyEditing !== selectedEvent.id\"\n                  @click.prevent=\"editEvent(selectedEvent)\"\n              >\n                Edit\n              </v-btn>\n\n              <v-btn\n                  text\n                  v-if=\"currentlyEditing === selectedEvent.id\"\n                  @click.prevent=\"updateEvent(selectedEvent)\"\n              >\n                Save\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-menu>\n      </v-sheet>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport {db} from '@/main';\n\nexport default {\n  data: () => ({\n    today: new Date().toISOString().substr(0, 10),\n    focus: new Date().toISOString().substr(0, 10),\n    type: \"month\",\n    typeToLabel: {\n      month: \"Month\",\n      week: \"Week\",\n      day: \"Day\",\n      \"4day\": \"4 Days\"\n    },\n    name: null,\n    details: null,\n    start: null,\n    end: null,\n    color: \"#1976D2\",\n    currentlyEditing: null,\n    selectedEvent: {},\n    selectedElement: null,\n    selectedOpen: false,\n    events: [],\n    dialog: false\n  }),\n  mounted() {\n    this.getEvents();\n  },\n  methods: {\n    async getEvents() {\n      let snapshot = await db.collection('calEvent').get();\n      let events = [];\n      snapshot.forEach(doc => {\n        let appData = doc.data();\n        appData.id = doc.id;\n        events.push(appData);\n      });\n      this.events = events;\n    },\n    async addEvent() {\n      if (this.name && this.start && this.end) {\n        await db.collection('calEvent').add({\n          name: this.name,\n          details: this.details,\n          start: this.start,\n          end: this.end,\n          color: this.color\n\n        });\n        this.getEvents();\n        this.name = \"\";\n        this.details = \"\";\n        this.start = \"\";\n        this.end = \"\";\n        this.color = \"#1976D2\";\n      } else {\n        alert('Name, start and end date are required')\n      }\n    },\n    async updateEvent(event) {\n      await db.collection('calEvent').doc(this.currentlyEditing).update({\n        details: event.details\n      });\n      this.selectedOpen = false;\n      this.currentlyEditing = null;\n    },\n    async deleteEvent(event) {\n      await db.collection('calEvent').doc(event).delete();\n      this.selectedOpen = false;\n      this.getEvents();\n    },\n    viewDay({date}) {\n      this.focus = date\n      this.type = 'day'\n    },\n    getEventColor(event) {\n      return event.color\n    },\n    setToday() {\n      this.focus = ''\n    },\n    prev() {\n      this.$refs.calendar.prev()\n    },\n    next() {\n      this.$refs.calendar.next()\n    },\n    editEvent(event) {\n      this.currentlyEditing = event.id;\n    },\n    showEvent({nativeEvent, event}) {\n      const open = () => {\n        this.selectedEvent = event\n        this.selectedElement = nativeEvent.target\n        setTimeout(() => {\n          this.selectedOpen = true\n        }, 10)\n      }\n      if (this.selectedOpen) {\n        this.selectedOpen = false\n        setTimeout(open, 10)\n      } else {\n        open()\n      }\n      nativeEvent.stopPropagation()\n    },\n    updateRange({start, end}) {\n      const events = []\n      const min = new Date(`${start.date}T00:00:00`)\n      const max = new Date(`${end.date}T23:59:59`)\n      const days = (max.getTime() - min.getTime()) / 86400000\n      const eventCount = this.rnd(days, days + 20)\n      for (let i = 0; i < eventCount; i++) {\n        const allDay = this.rnd(0, 3) === 0\n        const firstTimestamp = this.rnd(min.getTime(), max.getTime())\n        const first = new Date(firstTimestamp - (firstTimestamp % 900000))\n        const secondTimestamp = this.rnd(2, allDay ? 288 : 8) * 900000\n        const second = new Date(first.getTime() + secondTimestamp)\n        events.push({\n          name: this.names[this.rnd(0, this.names.length - 1)],\n          start: first,\n          end: second,\n          color: this.colors[this.rnd(0, this.colors.length - 1)],\n          timed: !allDay,\n        })\n      }\n      this.events = events\n    },\n    rnd (a, b) {\n      return Math.floor((b - a + 1) * Math.random()) + a\n    },\n\n\n  },\n}\n</script>"]}]}